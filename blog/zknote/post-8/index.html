<!doctype html><html class=scroll-smooth lang=en><head><meta charset=utf-8><link href=/css/style.css rel=stylesheet><link href=/line-awesome/css/line-awesome.min.css rel=stylesheet><script defer src=/js/main.js></script><title>Rank 1 Contraint Systems | Random thoughts here</title><body class="bg-white dark:bg-slate-900 transition ease-in-out"><section><div class="sticky top-0 bg-slate-100 dark:bg-slate-800"><div class="container mx-auto flex place-content-between py-16 lg:py-8 font-sans text-6xl lg:text-2xl text-slate-900 dark:text-slate-300"><div class=flex><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/> /blog </a><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/zknote/> /zknote </a></div><div class="flex gap-4"><div class="hidden cursor-pointer" id=back-to-top><i class="las la-level-up-alt"></i></div><a href=/><i class="las la-home"></i></a><div class=cursor-pointer id=darkmode-toggle><div class="hidden dark:inline"><i class="las la-sun"></i></div><div class="inline dark:hidden"><i class="las la-moon"></i></div></div></div></div></div><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script type=text/x-mathjax-config>
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$']]}
      });
    </script><div class="container mb-16"><div class="mt-4 font-serif text-slate-600 dark:text-slate-500 text-4xl lg:text-base">2024-03-10</div><h1 class="w-full mt-4 mb-8 font-serif text-8xl lg:text-4xl text-slate-900 dark:text-slate-300">Rank 1 Contraint Systems</h1><div class="w-100 border-t mb-8 border-slate-300 dark:border-slate-700"></div><div class=prose-boring><h3 id=rank-1-constraint-systems>Rank 1 Constraint Systems</h3><h3 id=witness-vector>Witness vector</h3><p>A witness means we don’t just know every input parameter, we must know every intermediate variable in this expanded form.<p>For completeness of calculation, the witness vector starts with 1, followed by input, output and process variables<blockquote><p>It’s based on the last episode <code>Arthimetic circuit</code>: If each step in the hash function can be proven to have been executed correctly, then the entire hash function can be proven to have been executed correctly, <em><strong>without executing the hash function</strong></em>. Similar situation here.</blockquote><h3 id=polynomial-transformation>Polynomial transformation</h3><p>Each row of our computation can only have one multiplication, so we must break up our equation as follows:<p>$$ out + (constants) = a\space*\space b\ or\ a\space*\space b - out + (constants) = 0 $$<p>and transform it to polynomial multiplication<p>$$ Cm = Am * Bm\ or\ Am * Bm -Cm = 0 $$<p>What needs to be done in the transformation is to configure appropriate parameters in the three vectors A, B, and C to comply with the constraints of the original polynomial.<h3 id=example>Example</h3><p>5 example:<p>$$ (1)\space out=x<em>y\ (2)\space out=x</em>y<em>z</em>u\ (3)\space out=x*y+2\ (4)\space out=2x^2+y\ (5)\space out=3x^2y+5xy-x-2y+3 $$<p>The number of constraints(the number of occurrences of multiplication) is the minimum formula we need. More can be constructed by multiplying by one<p>$$ \space out=x * y\space(1\space constraints)\ \space out=x * y * z * u\space(3\space constraints)\ \space out=x * y+2\space(1\space constraints)\ \space out=2x ^ 2+y\space(1\space constraints)\ \space out=3x ^ 2y+5xy-x-2y+3\space(3\space constraints) $$<p>and then break up it (only write the fifth one)<p>$$ out=3x^2y+5xy-x-2y+3\ =>\space\begin{equation}<br> \left{ \begin{array}{* * lr * *} v_1=3x * x, &\ v_2=v_1 * y, &\ -v_2 + x + 2y -3 + out = 5xy \end{array} \right. \end{equation} $$<p>Finally, we should constructed matrix for the constructed system of equations<p>we let witness be $w = \left[1\ out\ x\ y\ v_1\ v_2\right]$<p>and then construct as following:<p>$$ A = \begin{bmatrix} 0 & 0 & 3 & 0 & 0 & 0 \newline 0 & 0 & 0 & 0 & 1 & 0 \newline 0 & 0 & 5 & 0 & 0 & 0 \newline \end{bmatrix}\newline B = \begin{bmatrix} 0 & 0 & 1 & 0 & 0 & 0 \newline 0 & 0 & 0 & 1 & 0 & 0 \newline 0 & 0 & 0 & 1 & 0 & 0 \newline \end{bmatrix}\newline C = \begin{bmatrix} 0 & 0 & 0 & 0 & 1 & 0 \newline 0 & 0 & 0 & 0 & 0 & 1 \newline -3 & 1 & 1 & 2 & 0 & -1 \newline \end{bmatrix} $$<p>Substituting it into the formula( $Cm = Am * Bm$ ) and perform matrix multiplication could obtain the above system of equations<h3 id=circom-implementation>Circom implementation</h3><p>In Circom (and many other frameworks), math is done modulo <code>21888242871839275222246405745257275088548364400416034343698204186575808495617</code>.<p>and the above work can be completed through circom</div></div></section>